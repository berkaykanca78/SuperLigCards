<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Süper Lig Kadro Oluşturucu</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%23E60012' stroke='%23FFFFFF' stroke-width='3'/><polygon points='50,20 60,35 75,35 65,50 70,65 50,55 30,65 35,50 25,35 40,35' fill='%23FFFFFF'/></svg>"
        type="image/svg+xml">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: #0f172a;
            min-height: 100vh;
            color: white;
        }

        .container {
            display: flex;
            gap: 10px;
            padding: 20px;
            max-width: 1800px;
            margin: 0 auto;
            height: calc(100vh - 40px);
        }

        .left-panel {
            width: 350px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            height: 100%;
        }

        .right-panel {
            flex: 1;
            background: linear-gradient(to bottom,
                #2d5a27 0%,
                #1e4f14 25%,
                #2d5a27 50%,
                #1e4f14 75%,
                #2d5a27 100%);
            position: relative;
            border-radius: 12px;
            border: 4px solid rgba(255, 255, 255, 0.8);
            min-height: 800px;
            box-shadow:
                0 0 20px rgba(0, 0, 0, 0.3),
                inset 0 0 50px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .field-container {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 600px;
        }

        #cardContainer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        /* Saha çizgileri */
        .field-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        /* Çim deseni */
        .right-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 40px,
                rgba(255, 255, 255, 0.03) 40px,
                rgba(255, 255, 255, 0.03) 80px
            );
            pointer-events: none;
        }

        .right-panel::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: repeating-linear-gradient(
                -45deg,
                transparent,
                transparent 40px,
                rgba(255, 255, 255, 0.03) 40px,
                rgba(255, 255, 255, 0.03) 80px
            );
            pointer-events: none;
        }

        /* Orta saha çemberi */
        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150px;
            height: 150px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .center-dot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
        }

        /* Orta saha çizgisi */
        .field-center-line {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            transform: translateY(-50%);
        }

        /* Ceza sahaları */
        .penalty-area-top,
        .penalty-area-bottom {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 25%;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .penalty-area-top {
            top: 0;
        }

        .penalty-area-bottom {
            bottom: 0;
        }

        /* Kaleler */
        .goal-area-top,
        .goal-area-bottom {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 30%;
            height: 12%;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .goal-area-top {
            top: 0;
        }

        .goal-area-bottom {
            bottom: 0;
        }

        /* Kaleler */
        .goal-post-top,
        .goal-post-bottom {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 22%;
            height: 4%;
            border: 3px solid rgba(255, 255, 255, 1);
            box-shadow: 
                0 0 15px rgba(255, 255, 255, 0.5),
                0 0 30px rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            z-index: 10;
        }

        .goal-post-top {
            top: -4%;
        }

        .goal-post-bottom {
            bottom: -4%;
        }

        /* Kale Fileleri */
        .goal-net-top,
        .goal-net-bottom {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 22%;
            height: 8%;
            background-image: 
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 8px,
                    rgba(255, 255, 255, 0.15) 8px,
                    rgba(255, 255, 255, 0.15) 16px
                ),
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 8px,
                    rgba(255, 255, 255, 0.15) 8px,
                    rgba(255, 255, 255, 0.15) 16px
                );
            pointer-events: none;
            z-index: 9;
        }

        .goal-net-top {
            top: -12%;
            border-left: 3px solid rgba(255, 255, 255, 0.9);
            border-right: 3px solid rgba(255, 255, 255, 0.9);
            border-top: 3px solid rgba(255, 255, 255, 0.9);
            perspective: 100px;
            transform: translateX(-50%) rotateX(60deg);
            transform-origin: bottom;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        .goal-net-bottom {
            bottom: -12%;
            border-left: 3px solid rgba(255, 255, 255, 0.9);
            border-right: 3px solid rgba(255, 255, 255, 0.9);
            border-bottom: 3px solid rgba(255, 255, 255, 0.9);
            perspective: 100px;
            transform: translateX(-50%) rotateX(-60deg);
            transform-origin: top;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        /* Kale Direkleri */
        .goal-post-top::before,
        .goal-post-top::after,
        .goal-post-bottom::before,
        .goal-post-bottom::after {
            content: '';
            position: absolute;
            width: 3px;
            height: 8%;
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        .goal-post-top::before {
            left: 0;
            top: 0;
        }

        .goal-post-top::after {
            right: 0;
            top: 0;
        }

        .goal-post-bottom::before {
            left: 0;
            bottom: 0;
        }

        .goal-post-bottom::after {
            right: 0;
            bottom: 0;
        }

        /* Köşe yayları */
        .corner {
            position: absolute;
            width: 30px;
            height: 30px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .corner-top-left {
            top: -2px;
            left: -2px;
            border-radius: 0 0 30px 0;
            border-left: none;
            border-top: none;
        }

        .corner-top-right {
            top: -2px;
            right: -2px;
            border-radius: 0 0 0 30px;
            border-right: none;
            border-top: none;
        }

        .corner-bottom-left {
            bottom: -2px;
            left: -2px;
            border-radius: 0 30px 0 0;
            border-left: none;
            border-bottom: none;
        }

        .corner-bottom-right {
            bottom: -2px;
            right: -2px;
            border-radius: 30px 0 0 0;
            border-right: none;
            border-bottom: none;
        }

        /* Formasyon noktaları */
        .formation-point {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 12px;
            pointer-events: none;
            backdrop-filter: blur(4px);
        }

        .formation-point.active {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .formation-point.highlight {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            }
        }

        /* Kart container stilleri */
        .card-container {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .card-container .player-card {
            position: absolute;
            pointer-events: auto;
            cursor: move;
            transition: all 0.15s ease-out;
            transform: translate(-50%, -50%) scale(0.4) !important;
            z-index: 1;
            will-change: transform;
            touch-action: none;
        }

        .card-container .player-card:hover {
            transform: translate(-50%, -50%) scale(0.45) !important;
            z-index: 1000;
            transition: all 0.2s ease-out;
        }

        .card-container .player-card.dragging {
            opacity: 0.9;
            transform: translate(-50%, -50%) scale(0.4) !important;
            z-index: 1001;
            transition: none;
            pointer-events: none;
        }

        .team-selector, .formation-controls {
            background: #1e293b;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 8px;
        }

        .team-selector select, .position-filter select, .formation-select {
            padding: 6px 10px;
            background: #334155;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            outline: none;
            flex: 1;
        }

        .team-selector select:hover, .position-filter select:hover, .formation-select:hover {
            background: #475569;
        }

        .team-selector select option, .position-filter select option, .formation-select option {
            background: #334155;
            color: white;
            padding: 4px;
        }

        .cards-container {
            flex: 1;
            background: #1e293b;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            align-content: start;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            padding: 10px;
            width: 100%;
        }

        .player-card {
            width: 140px;
            height: 200px;
            background: linear-gradient(135deg, #2c2c54 0%, #40407a 50%, #2c2c54 100%);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            margin: 0 auto;
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        .player-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .rating-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            background: linear-gradient(145deg, #FFD700 0%, #FFA500 100%);
            border-radius: 8px;
            padding: 4px 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        .rating-number {
            font-size: 1.2rem;
            font-weight: 700;
            color: #000;
            line-height: 1;
        }

        .rating-type {
            font-size: 0.7rem;
            font-weight: 500;
            color: #000;
            margin-top: 2px;
        }

        .position-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 3px 6px;
            border-radius: 6px;
            font-size: 0.65rem;
            font-weight: 500;
            z-index: 2;
        }

        .player-image-container {
            width: 100%;
            height: 120px;
            position: relative;
            overflow: hidden;
            margin-top: 25px;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.8) 100%);
        }

        .player-image {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .player-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: top center;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .player-card:hover .player-image img {
            transform: scale(1.05);
        }

        .player-info {
            padding: 6px;
            position: relative;
            z-index: 2;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.9) 100%);
            border-radius: 0 0 12px 12px;
        }

        .player-name {
            font-size: 0.85rem;
            font-weight: 700;
            color: #fff;
            text-align: center;
            margin-bottom: 4px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .player-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 4px;
            padding: 0 5px;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0px;
        }

        .stat-value {
            font-size: 0.85rem;
            font-weight: 700;
            color: #FFD700;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            line-height: 1;
        }

        .stat-label {
            font-size: 0.55rem;
            font-weight: 500;
            color: #fff;
            opacity: 0.8;
            line-height: 1;
        }

        .player-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.7rem;
            color: rgba(255,255,255,0.8);
            padding: 0 5px;
        }

        .country-flag {
            width: 16px;
            height: 12px;
            margin-right: 4px;
            vertical-align: middle;
            border-radius: 2px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .card-glow {
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #FF6B00, #FF8F00, #FFA726, #FF6B00);
            border-radius: 20px;
            z-index: -2;
            opacity: 0;
            transition: all 0.3s ease;
            filter: blur(15px);
        }

        .player-card:hover .card-glow {
            opacity: 0.6;
            animation: glowPulse 2s ease-in-out infinite alternate;
        }

        @keyframes glowPulse {
            0% {
                opacity: 0.4;
                transform: scale(1);
            }
            100% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }

        .card-shine {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: translateY(-100%) rotate(45deg);
            animation: shine 3s infinite;
            z-index: 1;
        }

        @keyframes shine {
            0% {
                transform: translateY(-100%) rotate(45deg);
            }
            20% {
                transform: translateY(100%) rotate(45deg);
            }
            100% {
                transform: translateY(100%) rotate(45deg);
            }
        }

        .no-cards-message {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                gap: 20px;
            }

            .sidebar {
            width: 100%;
                height: auto;
                max-height: none;
                position: static;
                order: -1;
                background: linear-gradient(135deg, #f8f9fa, #e9ecef);
                border: 2px solid #E60012;
            }

            .teams-list {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
            }

            .team-item {
                flex: 0 0 calc(50% - 4px);
                margin-bottom: 0;
            }

            .team-button {
                padding: 8px;
                font-size: 0.8rem;
                background: rgba(230, 0, 18, 0.1);
                color: #333333;
                border: 1px solid rgba(230, 0, 18, 0.2);
            }

            .team-logo {
                width: 20px;
                height: 20px;
            }

            .header {
                flex-direction: column;
            text-align: center;
                gap: 20px;
            }

            .header-text {
                text-align: center;
            }

            .galatasaray-logo {
                width: 80px;
                height: 80px;
            }

            .cards-grid {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .header h1 {
                font-size: 2.5rem;
        }

        .player-card {
                width: 220px;
                height: 320px;
            }

            .player-image-container {
            width: 120px;
            height: 160px;
            }
        }

        /* Takıma özel stiller */
        .player-card.galatasaray {
            background: linear-gradient(135deg, #7B2539 0%, #E30613 50%, #7B2539 100%);
        }

        .player-card.galatasaray .rating-badge {
            background: linear-gradient(145deg, #FDB912 0%, #FFD700 100%);
        }

        .player-card.galatasaray .position-badge {
            background: #7B2539;
            color: #FDB912;
        }

        .player-card.fenerbahce {
            background: linear-gradient(135deg, #041E42 0%, #273B8A 50%, #041E42 100%);
        }

        .player-card.fenerbahce .rating-badge {
            background: linear-gradient(145deg, #FFED00 0%, #FFD700 100%);
        }

        .player-card.fenerbahce .position-badge {
            background: #041E42;
            color: #FFED00;
        }

        .player-card.besiktas {
            background: linear-gradient(135deg, #1A1A1A 0%, #2C2C2C 50%, #1A1A1A 100%);
        }

        .player-card.besiktas .rating-badge {
            background: linear-gradient(145deg, #FFFFFF 0%, #CCCCCC 100%);
        }

        .player-card.besiktas .position-badge {
            background: #1A1A1A;
            color: #FFFFFF;
        }

        .player-card.trabzonspor {
            background: linear-gradient(135deg, #7B2539 0%, #2E3A87 50%, #7B2539 100%);
        }

        .player-card.trabzonspor .rating-badge {
            background: linear-gradient(145deg, #86BBD8 0%, #2E3A87 100%);
            color: #FFFFFF;
        }

        .player-card.trabzonspor .position-badge {
            background: #7B2539;
            color: #86BBD8;
        }

        /* Teknik direktör kartları için özel stil */
        .player-card .rating-badge[style*="C0C0C0"] {
            background: linear-gradient(145deg, #C0C0C0 0%, #A0A0A0 100%) !important;
        }

        .player-card .rating-badge[style*="C0C0C0"] .rating-number,
        .player-card .rating-badge[style*="C0C0C0"] .rating-type {
            color: #000000 !important;
        }

        /* Kart parlaması efekti */
        .player-card.galatasaray .card-glow {
            background: linear-gradient(45deg, #E30613, #FDB912, #E30613);
        }

        .player-card.fenerbahce .card-glow {
            background: linear-gradient(45deg, #273B8A, #FFED00, #273B8A);
        }

        .player-card.besiktas .card-glow {
            background: linear-gradient(45deg, #1A1A1A, #FFFFFF, #1A1A1A);
        }

        .player-card.trabzonspor .card-glow {
            background: linear-gradient(45deg, #7B2539, #86BBD8, #7B2539);
        }

        /* Kartların üst üste binmesini engelle */
        .formation-point.occupied {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.6);
            pointer-events: none;
        }

        /* Yatay çizgi */
        .horizontal-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        /* Formasyon noktası durumları */
        .formation-point.occupied {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.6);
            pointer-events: none;
        }

        .formation-point.invalid {
            background: rgba(255, 0, 0, 0.3);
            border: 2px solid rgba(255, 0, 0, 0.6);
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            25% { transform: translate(-50%, -50%) rotate(-5deg); }
            75% { transform: translate(-50%, -50%) rotate(5deg); }
        }

        /* Kart pozisyon göstergeleri */
        .position-indicator {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .formation-point:hover .position-indicator {
            opacity: 1;
        }

        .formation-controls {
            background: #1e293b;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 10px;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .formation-select {
            padding: 6px 10px;
            font-size: 13px;
        }

        .clear-btn {
            padding: 6px 10px;
            background: #334155;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: white;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            min-width: 90px;
        }

        .clear-btn:hover {
            background: #475569;
        }

        .clear-btn:active {
            transform: translateY(1px);
        }

        .clear-btn::before {
            content: '🗑️';
            font-size: 13px;
        }

        /* Anasayfa butonu stilleri */
        .home-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #E60012 0%, #FF1A1A 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .home-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #FF1A1A 0%, #E60012 100%);
        }

        .home-button:active {
            transform: translateY(0);
        }

        .home-button::before {
            content: '🏠';
            font-size: 16px;
        }

        @media (max-width: 768px) {
            .home-button {
                bottom: 10px;
                left: 10px;
                padding: 8px 16px;
                font-size: 12px;
            }
        }
    </style>
</head>

<body>
    <a href="index.html" class="home-button">Anasayfa</a>
    <div class="container">
        <div class="left-panel">
            <div class="team-selector">
                <select id="teamSelect">
                    <option value="">Takım Seçin</option>
                    <option value="galatasaray">Galatasaray</option>
                    <option value="fenerbahce">Fenerbahçe</option>
                    <option value="besiktas">Beşiktaş</option>
                    <option value="trabzonspor">Trabzonspor</option>
                </select>
                <select id="positionFilter">
                    <option value="">Tüm Pozisyonlar</option>
                    <option value="GK">Kaleci</option>
                    <option value="DEF">Defans</option>
                    <option value="MID">Orta Saha</option>
                    <option value="FW">Forvet</option>
                </select>
            </div>
            <div class="formation-controls">
                <select class="formation-select" id="formation">
                    <option value="4-4-2">4-4-2 Klasik</option>
                    <option value="4-3-3">4-3-3 Hücum</option>
                    <option value="3-5-2">3-5-2 Kanat</option>
                    <option value="4-2-3-1">4-2-3-1 Modern</option>
                </select>
                <button class="clear-btn" onclick="clearField()">Temizle</button>
            </div>
            <div class="cards-container" id="cardsContainer">
                <div class="no-cards-message">
                    Oyuncu kartlarını görmek için takım seçin
                </div>
            </div>
        </div>
        <div class="right-panel">
            <div class="field-container">
                <div id="formationPoints"></div>
                <div id="cardContainer"></div>
                <div class="center-circle">
                    <div class="center-dot"></div>
                </div>
                <div class="field-center-line"></div>
                <div class="penalty-area-top"></div>
                <div class="penalty-area-bottom"></div>
                <div class="goal-area-top"></div>
                <div class="goal-area-bottom"></div>
                <div class="goal-post-top"></div>
                <div class="goal-post-bottom"></div>
                <div class="goal-net-top"></div>
                <div class="goal-net-bottom"></div>
                <div class="corner corner-top-left"></div>
                <div class="corner corner-top-right"></div>
                <div class="corner corner-bottom-left"></div>
                <div class="corner corner-bottom-right"></div>
            </div>
        </div>
    </div>

    <script>
        // Takım kart fonksiyonları
        function showGalatasarayCards() {
            return `
                <div class="cards-grid">
                    <!-- Mauro Icardi -->
                    <div class="player-card galatasaray" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">86</div>
                            <div class="rating-type">ST</div>
                        </div>

                        <div class="position-badge">FORVET</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/icardi.png"
                                    alt="Mauro Icardi" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">MAURO ICARDI</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">89</div>
                                    <div class="stat-label">BİT</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">85</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">82</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/9.png"
                                        alt="Argentina" class="country-flag">
                                    ARG • 32 yaş
                                </div>
                                <div># 9</div>
                            </div>
                        </div>

                    </div>

                    <!-- Leroy Sané -->
                    <div class="player-card galatasaray" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">85</div>
                            <div class="rating-type">LM</div>
                        </div>

                        <div class="position-badge">SOL KANAT</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="./assets/players/sane.png" alt="Leroy Sané"
                                    onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">LEROY SANÉ</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">93</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">87</div>
                                    <div class="stat-label">DRİB</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">84</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/40.png"
                                        alt="Germany" class="country-flag">
                                    GER • 28 yaş
                                </div>
                                <div># 10</div>
                            </div>
                        </div>

                    </div>

                    <!-- Davinson Sanchez -->
                    <div class="player-card galatasaray" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">82</div>
                            <div class="rating-type">CB</div>
                        </div>

                        <div class="position-badge">DEFANS</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/davinson.png"
                                    alt="Davinson Sanchez" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">DAVINSON SANCHEZ</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">78</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">85</div>
                                    <div class="stat-label">DEF</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">89</div>
                                    <div class="stat-label">FİZ</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Flag_of_Colombia.svg/1024px-Flag_of_Colombia.svg.png"
                                        alt="Colombia" class="country-flag">
                                    COL • 28 yaş
                                </div>
                                <div># 6</div>
                            </div>
                        </div>

                    </div>
                </div>
            `;
        }

        function showFenerbahceCards() {
            return `
                <div class="cards-grid">
                    <!-- John Duran -->
                    <div class="player-card fenerbahce" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">80</div>
                            <div class="rating-type">ST</div>
                        </div>

                        <div class="position-badge">FORVET</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/duran.png"
                                    alt="John Duran" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">JHON DURÁN</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">85</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">88</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">82</div>
                                    <div class="stat-label">FİZ</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/25.png" alt="Colombia" class="country-flag">
                                    COL • 21 yaş
                                </div>
                                <div># 19</div>
                            </div>
                        </div>

                    </div>

                    <!-- İrfan Can Kahveci -->
                    <div class="player-card fenerbahce" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">84</div>
                            <div class="rating-type">CAM</div>
                        </div>

                        <div class="position-badge">ORTA SAHA</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/irfan.png"
                                    alt="İrfan Can Kahveci" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">İRFAN CAN KAHVECİ</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">86</div>
                                    <div class="stat-label">PAS</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">84</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">78</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/174.png" alt="Turkey" class="country-flag">
                                    TUR • 29 yaş
                                </div>
                                <div># 17</div>
                            </div>
                        </div>

                    </div>

                    <!-- Fred -->
                    <div class="player-card fenerbahce" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">84</div>
                            <div class="rating-type">CDM</div>
                        </div>

                        <div class="position-badge">ORTA SAHA</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/fred.png"
                                    alt="Fred" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">FRED</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">88</div>
                                    <div class="stat-label">PAS</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">85</div>
                                    <div class="stat-label">DEF</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">82</div>
                                    <div class="stat-label">TEK</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/26.png" alt="Brazil" class="country-flag">
                                    BRA • 31 yaş
                                </div>
                                <div># 13</div>
                            </div>
                        </div>

                    </div>
                </div>
            `;
        }

        function showBesiktasCards() {
            return `
                <div class="cards-grid">
                    <!-- Tammy Abraham -->
                    <div class="player-card besiktas" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">84</div>
                            <div class="rating-type">ST</div>
                        </div>

                        <div class="position-badge">FORVET</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/abraham.png"
                                    alt="Tammy Abraham" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">TAMMY ABRAHAM</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">87</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">83</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">89</div>
                                    <div class="stat-label">FİZ</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/189.png" alt="England" class="country-flag">
                                    ENG • 27 yaş
                                </div>
                                <div># 9</div>
                            </div>
                        </div>

                    </div>

                    <!-- Rafa Silva -->
                    <div class="player-card besiktas" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">85</div>
                            <div class="rating-type">RW</div>
                        </div>

                        <div class="position-badge">SAĞ KANAT</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/rafa.png"
                                    alt="Rafa Silva" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">RAFA SILVA</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">91</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">88</div>
                                    <div class="stat-label">DRİB</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">83</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Flag_of_Portugal.svg/512px-Flag_of_Portugal.svg.png" alt="Portugal" class="country-flag">
                                    POR • 31 yaş
                                </div>
                                <div># 27</div>
                            </div>
                        </div>

                    </div>

                    <!-- Gedson Fernandes -->
                    <div class="player-card besiktas" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">80</div>
                            <div class="rating-type">CM</div>
                        </div>

                        <div class="position-badge">ORTA SAHA</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/gedson.png"
                                    alt="Gedson Fernandes" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">GEDSON FERNANDES</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">82</div>
                                    <div class="stat-label">PAS</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">85</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">79</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Flag_of_Portugal.svg/512px-Flag_of_Portugal.svg.png" alt="Portugal" class="country-flag">
                                    POR • 25 yaş
                                </div>
                                <div># 83</div>
                            </div>
                        </div>

                    </div>
                </div>
            `;
        }

        function showTrabzonsporCards() {
            return `
                <div class="cards-grid">
                    <!-- Paul Onuachu -->
                    <div class="player-card trabzonspor" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">83</div>
                            <div class="rating-type">ST</div>
                        </div>

                        <div class="position-badge">FORVET</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/onuachu.png"
                                    alt="Paul Onuachu" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">PAUL ONUACHU</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">87</div>
                                    <div class="stat-label">BİT</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">84</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">89</div>
                                    <div class="stat-label">FİZ</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/124.png" alt="Nigeria" class="country-flag">
                                    NGA • 29 yaş
                                </div>
                                <div># 9</div>
                            </div>
                        </div>

                    </div>

                    <!-- Edin Visca -->
                    <div class="player-card trabzonspor" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">81</div>
                            <div class="rating-type">RW</div>
                        </div>

                        <div class="position-badge">SAĞ KANAT</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/visca.png"
                                    alt="Edin Visca" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">EDİN VİŞĆA</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">88</div>
                                    <div class="stat-label">HIZ</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">86</div>
                                    <div class="stat-label">DRİB</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">82</div>
                                    <div class="stat-label">ŞUT</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/80.png" alt="Bosnia" class="country-flag">
                                    BIH • 34 yaş
                                </div>
                                <div># 31</div>
                            </div>
                        </div>

                    </div>
                
                    <!-- Uğurcan Çakır -->
                    <div class="player-card trabzonspor" draggable="true">
                        <div class="card-glow"></div>
                        <div class="card-shine"></div>

                        <div class="rating-badge">
                            <div class="rating-number">84</div>
                            <div class="rating-type">GK</div>
                        </div>

                        <div class="position-badge">KALECİ</div>

                        <div class="player-image-container">
                            <div class="player-image">
                                <img src="assets/players/ugurcan.png"
                                    alt="Uğurcan Çakır" onerror="this.style.display='none'">
                            </div>
                        </div>

                        <div class="player-info">
                            <div class="player-name">UĞURCAN ÇAKIR</div>

                            <div class="player-stats">
                                <div class="stat">
                                    <div class="stat-value">86</div>
                                    <div class="stat-label">REF</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">88</div>
                                    <div class="stat-label">DİV</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">84</div>
                                    <div class="stat-label">POS</div>
                                </div>
                            </div>

                            <div class="player-details">
                                <div>
                                    <img src="https://tmssl.akamaized.net/images/flagge/verysmall/174.png" alt="Turkey" class="country-flag">
                                    TUR • 28 yaş
                                </div>
                                <div># 1</div>
                            </div>
                        </div>

                    </div>
                </div>
            `;
        }

        // Formasyon pozisyonları
        const formations = {
            '4-4-2': {
                positions: [
                    { x: 50, y: 93, role: 'GK', allowedRoles: ['GK'] },
                    { x: 15, y: 75, role: 'LB', allowedRoles: ['LB', 'LWB'] },
                    { x: 35, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 65, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 85, y: 75, role: 'RB', allowedRoles: ['RB', 'RWB'] },
                    { x: 10, y: 50, role: 'LM', allowedRoles: ['LM', 'LW'] },
                    { x: 35, y: 50, role: 'CM', allowedRoles: ['CM', 'CDM'] },  // CM biraz ileri
                    { x: 65, y: 50, role: 'CM', allowedRoles: ['CM', 'CDM'] },  // CM biraz ileri
                    { x: 90, y: 50, role: 'RM', allowedRoles: ['RM', 'RW'] },
                    { x: 35, y: 20, role: 'ST', allowedRoles: ['ST', 'CF'] },
                    { x: 65, y: 20, role: 'ST', allowedRoles: ['ST', 'CF'] }
                ]
            },
            '4-3-3': {
                positions: [
                    { x: 50, y: 93, role: 'GK', allowedRoles: ['GK'] },
                    { x: 15, y: 75, role: 'LB', allowedRoles: ['LB', 'LWB'] },
                    { x: 35, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 65, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 85, y: 75, role: 'RB', allowedRoles: ['RB', 'RWB'] },
                    { x: 35, y: 50, role: 'CM', allowedRoles: ['CM', 'CDM'] },  // CM biraz ileri
                    { x: 50, y: 45, role: 'CM', allowedRoles: ['CM', 'CAM'] },  // CAM biraz ileri
                    { x: 65, y: 50, role: 'CM', allowedRoles: ['CM', 'CDM'] },  // CM biraz ileri
                    { x: 10, y: 20, role: 'LW', allowedRoles: ['LW', 'LM'] },
                    { x: 50, y: 15, role: 'ST', allowedRoles: ['ST', 'CF'] },
                    { x: 90, y: 20, role: 'RW', allowedRoles: ['RW', 'RM'] }
                ]
            },
            '3-5-2': {
                positions: [
                    { x: 50, y: 93, role: 'GK', allowedRoles: ['GK'] },
                    { x: 35, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 50, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 65, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 10, y: 45, role: 'LM', allowedRoles: ['LM', 'LWB'] },
                    { x: 35, y: 50, role: 'CM', allowedRoles: ['CM', 'CDM'] },  // CM biraz ileri
                    { x: 50, y: 45, role: 'CM', allowedRoles: ['CM', 'CAM'] },  // CAM biraz ileri
                    { x: 65, y: 50, role: 'CM', allowedRoles: ['CM', 'CDM'] },  // CM biraz ileri
                    { x: 90, y: 45, role: 'RM', allowedRoles: ['RM', 'RWB'] },
                    { x: 35, y: 20, role: 'ST', allowedRoles: ['ST', 'CF'] },
                    { x: 65, y: 20, role: 'ST', allowedRoles: ['ST', 'CF'] }
                ]
            },
            '4-2-3-1': {
                positions: [
                    { x: 50, y: 93, role: 'GK', allowedRoles: ['GK'] },
                    { x: 15, y: 75, role: 'LB', allowedRoles: ['LB', 'LWB'] },
                    { x: 35, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 65, y: 80, role: 'CB', allowedRoles: ['CB'] },
                    { x: 85, y: 75, role: 'RB', allowedRoles: ['RB', 'RWB'] },
                    { x: 35, y: 60, role: 'CDM', allowedRoles: ['CDM', 'CM'] },  // CDM biraz ileri
                    { x: 65, y: 60, role: 'CDM', allowedRoles: ['CDM', 'CM'] },  // CDM biraz ileri
                    { x: 10, y: 35, role: 'LAM', allowedRoles: ['LM', 'LW'] },
                    { x: 50, y: 35, role: 'CAM', allowedRoles: ['CAM', 'CF'] },  // CAM biraz ileri
                    { x: 90, y: 35, role: 'RAM', allowedRoles: ['RM', 'RW'] },
                    { x: 50, y: 15, role: 'ST', allowedRoles: ['ST', 'CF'] }
                ]
            }
        };

        // Formasyon değiştiğinde noktaları güncelle
        document.getElementById('formation').addEventListener('change', function() {
            createFormationPoints(this.value);
            clearField();
        });

        // Formasyon noktalarını oluştur
        function createFormationPoints(formation) {
            const formationPoints = document.getElementById('formationPoints');
            formationPoints.innerHTML = '';

            formations[formation].positions.forEach((pos, index) => {
                const point = document.createElement('div');
                point.className = 'formation-point';
                point.style.left = `${pos.x}%`;
                point.style.top = `${pos.y}%`;
                point.textContent = pos.role;
                point.dataset.index = index;

                // Pozisyon göstergesi ekle
                const indicator = document.createElement('div');
                indicator.className = 'position-indicator';
                indicator.textContent = `${pos.role} (${pos.allowedRoles.join(', ')})`;
                point.appendChild(indicator);

                formationPoints.appendChild(point);
            });
        }

        // Başlangıçta 4-4-2 formasyonunu göster
        createFormationPoints('4-4-2');

        let draggedCard = null;
        let dragOffset = { x: 0, y: 0 };

        function handleDragStart(e) {
            const card = e.target.closest('.player-card');
            if (!card) return;

            draggedCard = card;
            draggedCard.classList.add('dragging');

            const rect = card.getBoundingClientRect();
            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;

            // Create a more efficient drag image
            const dragImage = card.cloneNode(true);
            dragImage.style.transform = 'translate(-50%, -50%) scale(0.4)';
            dragImage.style.opacity = '0.9';
            dragImage.style.position = 'fixed';
            dragImage.style.left = '-1000px';
            dragImage.style.top = '-1000px';
            dragImage.style.pointerEvents = 'none';
            document.body.appendChild(dragImage);
            
            e.dataTransfer.setDragImage(dragImage, dragOffset.x, dragOffset.y);
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', '');

            requestAnimationFrame(() => {
                document.body.removeChild(dragImage);
            });
        }

        function handleDragEnd(e) {
            if (draggedCard) {
                draggedCard.classList.remove('dragging');
                draggedCard = null;
            }
        }

        const field = document.querySelector('.right-panel');

        field.addEventListener('dragover', (e) => {
            e.preventDefault();
            if (!draggedCard) return;

            const rect = field.getBoundingClientRect();
            const x = ((e.clientX - dragOffset.x - rect.left) / rect.width) * 100;
            const y = ((e.clientY - dragOffset.y - rect.top) / rect.height) * 100;

            // Saha sınırları içinde tut
            const cardWidth = (draggedCard.offsetWidth / rect.width) * 100;
            const cardHeight = (draggedCard.offsetHeight / rect.height) * 100;

            const boundedX = Math.max(cardWidth / 2, Math.min(100 - cardWidth / 2, x));
            const boundedY = Math.max(cardHeight / 2, Math.min(100 - cardHeight / 2, y));

            // En yakın formasyon noktasını bul
            const points = document.querySelectorAll('.formation-point');
            let closestPoint = null;
            let minDistance = Infinity;

            points.forEach(point => {
                const pointX = parseFloat(point.style.left);
                const pointY = parseFloat(point.style.top);
                const distance = Math.sqrt(
                    Math.pow(boundedX - pointX, 2) +
                    Math.pow(boundedY - pointY, 2)
                );

                if (distance < minDistance) {
                    minDistance = distance;
                    closestPoint = point;
                }
            });

            // Yakın noktayı vurgula
            points.forEach(p => p.classList.remove('highlight'));
            if (minDistance < 15) {
                closestPoint.classList.add('highlight');
            }
        });

        field.addEventListener('drop', (e) => {
            e.preventDefault();
            if (!draggedCard) return;

            const rect = field.getBoundingClientRect();
            const x = ((e.clientX - dragOffset.x - rect.left) / rect.width) * 100;
            const y = ((e.clientY - dragOffset.y - rect.top) / rect.height) * 100;

            // En yakın noktayı bul
            const points = document.querySelectorAll('.formation-point');
            let closestPoint = null;
            let minDistance = Infinity;

            points.forEach(point => {
                if (point.classList.contains('occupied')) return; // Dolu pozisyonları atla

                const pointX = parseFloat(point.style.left);
                const pointY = parseFloat(point.style.top);
                const distance = Math.sqrt(
                    Math.pow(x - pointX, 2) +
                    Math.pow(y - pointY, 2)
                );

                if (distance < minDistance) {
                    minDistance = distance;
                    closestPoint = point;
                }
            });

            // Kartı yerleştir
            if (minDistance < 15 && closestPoint) {
                const currentFormation = document.getElementById('formation').value;
                const pointIndex = parseInt(closestPoint.dataset.index);
                const allowedRoles = formations[currentFormation].positions[pointIndex].allowedRoles;

                if (isPositionAllowed(draggedCard, allowedRoles)) {
                    const fieldCard = draggedCard.cloneNode(true);
                    fieldCard.style.position = 'absolute';
                    fieldCard.style.left = closestPoint.style.left;
                    fieldCard.style.top = closestPoint.style.top;
                    fieldCard.style.transform = 'translate(-50%, -50%) scale(0.4)';
                    fieldCard.style.zIndex = '10';
                    fieldCard.style.cursor = 'move';

                    closestPoint.classList.add('occupied');
                    makeDraggable(fieldCard);
                    document.getElementById('cardContainer').appendChild(fieldCard);
                } else {
                    // Pozisyon uygun değilse görsel feedback
                    closestPoint.classList.add('invalid');
                    setTimeout(() => closestPoint.classList.remove('invalid'), 500);
                }
            }

            // Vurgulamayı kaldır
            points.forEach(p => p.classList.remove('highlight'));
        });

        function makeDraggable(element) {
            let isDragging = false;
            let currentX;
            let currentY;
            let initialX;
            let initialY;
            let xOffset = 0;
            let yOffset = 0;

            element.addEventListener('mousedown', dragStart);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', dragEnd);

            function dragStart(e) {
                if (e.target === element || element.contains(e.target)) {
                    const rect = element.getBoundingClientRect();
                    xOffset = rect.left + rect.width / 2;
                    yOffset = rect.top + rect.height / 2;
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;

                    isDragging = true;
                    element.style.zIndex = '1000';
                    element.classList.add('dragging');
                }
            }

            function drag(e) {
                if (isDragging) {
                    e.preventDefault();
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;

                    const fieldRect = field.getBoundingClientRect();
                    const x = (currentX - fieldRect.left) / fieldRect.width * 100;
                    const y = (currentY - fieldRect.top) / fieldRect.height * 100;

                    // En yakın noktayı bul
                    const points = document.querySelectorAll('.formation-point');
                    let closestPoint = null;
                    let minDistance = Infinity;

                    points.forEach(point => {
                        const pointX = parseFloat(point.style.left);
                        const pointY = parseFloat(point.style.top);
                        const distance = Math.sqrt(
                            Math.pow(x - pointX, 2) +
                            Math.pow(y - pointY, 2)
                        );

                        if (distance < minDistance) {
                            minDistance = distance;
                            closestPoint = point;
                        }
                    });

                    // Vurgulamayı güncelle
                    points.forEach(p => p.classList.remove('highlight'));
                    if (minDistance < 15) {
                        closestPoint.classList.add('highlight');
                    }

                    // Kartı sınırlar içinde tut
                    const cardWidth = (element.offsetWidth / fieldRect.width) * 100;
                    const cardHeight = (element.offsetHeight / fieldRect.height) * 100;

                    const boundedX = Math.max(cardWidth / 2, Math.min(100 - cardWidth / 2, x));
                    const boundedY = Math.max(cardHeight / 2, Math.min(100 - cardHeight / 2, y));

                    element.style.left = `${boundedX}%`;
                    element.style.top = `${boundedY}%`;
                }
            }

            function dragEnd() {
                if (isDragging) {
                isDragging = false;
                    element.style.zIndex = '10';
                    element.classList.remove('dragging');

                    // En yakın noktaya snap
                    const rect = element.getBoundingClientRect();
                    const fieldRect = field.getBoundingClientRect();
                    const x = ((rect.left + rect.width / 2) - fieldRect.left) / fieldRect.width * 100;
                    const y = ((rect.top + rect.height / 2) - fieldRect.top) / fieldRect.height * 100;

                    const points = document.querySelectorAll('.formation-point');
                    let closestPoint = null;
                    let minDistance = Infinity;

                    points.forEach(point => {
                        const pointX = parseFloat(point.style.left);
                        const pointY = parseFloat(point.style.top);
                        const distance = Math.sqrt(
                            Math.pow(x - pointX, 2) +
                            Math.pow(y - pointY, 2)
                        );

                        if (distance < minDistance) {
                            minDistance = distance;
                            closestPoint = point;
                        }
                    });

                    if (minDistance < 15 && closestPoint) {
                        element.style.left = closestPoint.style.left;
                        element.style.top = closestPoint.style.top;
                        closestPoint.classList.add('active');
                    }

                    // Vurgulamayı kaldır
                    points.forEach(p => p.classList.remove('highlight'));
                }
            }
        }

        // Temizle fonksiyonunu güncelle
        function clearField() {
            const container = document.getElementById('cardContainer');
            container.innerHTML = '';
            document.querySelectorAll('.formation-point').forEach(point => {
                point.classList.remove('active', 'highlight', 'occupied', 'invalid');
            });
        }

        // Takım seçimi değiştiğinde
        document.getElementById('teamSelect').addEventListener('change', function () {
            const selectedTeam = this.value;
            const selectedPosition = document.getElementById('positionFilter').value;
            if (selectedTeam) {
                loadTeamCards(selectedTeam, selectedPosition);
            } else {
                clearField();
                document.getElementById('cardsContainer').innerHTML = `
                    <div class="no-cards-message">
                        Oyuncu kartlarını görmek için takım seçin
                    </div>
                `;
            }
        });

        // Pozisyon filtresi değiştiğinde
        document.getElementById('positionFilter').addEventListener('change', function () {
            const selectedTeam = document.getElementById('teamSelect').value;
            const selectedPosition = this.value;
            if (selectedTeam) {
                loadTeamCards(selectedTeam, selectedPosition);
            }
        });

        async function loadTeamCards(teamName, position = '') {
            const sidebarContainer = document.getElementById('cardsContainer');
            if (!sidebarContainer) return;

            try {
                let cardsHtml = '';
                sidebarContainer.innerHTML = '';

                // Takıma göre ilgili fonksiyonu çağır
                switch (teamName) {
                    case 'galatasaray':
                        cardsHtml = showGalatasarayCards();
                        break;
                    case 'fenerbahce':
                        cardsHtml = showFenerbahceCards();
                        break;
                    case 'besiktas':
                        cardsHtml = showBesiktasCards();
                        break;
                    case 'trabzonspor':
                        cardsHtml = showTrabzonsporCards();
                        break;
                    default:
                        showNoCardsMessage(teamName);
                        return;
                }

                // Geçici bir div oluştur ve HTML'i içine yerleştir
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = cardsHtml;

                // Kartları seç ve filtrele
                let playerCards = Array.from(tempDiv.querySelectorAll('.player-card'))
                    .filter(card => {
                        const positionBadge = card.querySelector('.position-badge');
                        return !positionBadge || !positionBadge.textContent.includes('TEKNİK DİREKTÖR');
                    });

                // Pozisyon filtresini uygula
                if (position) {
                    playerCards = playerCards.filter(card => {
                        const ratingType = card.querySelector('.rating-type').textContent;
                        switch (position) {
                            case 'GK':
                                return ratingType === 'GK';
                            case 'DEF':
                                return ['CB', 'LB', 'RB', 'LWB', 'RWB'].includes(ratingType);
                            case 'MID':
                                return ['CM', 'CDM', 'CAM', 'LM', 'RM'].includes(ratingType);
                            case 'FW':
                                return ['ST', 'CF', 'LW', 'RW'].includes(ratingType);
                            default:
                                return true;
                        }
                    });
                }

                if (playerCards.length === 0) {
                    showNoCardsMessage(teamName);
                    return;
                }

                // Kartları sidebar'a ekle
                playerCards.forEach(card => {
                    const sidebarCard = card.cloneNode(true);
                    if (!sidebarCard.classList.contains(teamName)) {
                        sidebarCard.classList.add(teamName);
                    }
                    sidebarCard.style.cursor = 'grab';
                    sidebarCard.setAttribute('draggable', 'true');
                    sidebarCard.addEventListener('dragstart', handleDragStart);
                    sidebarCard.addEventListener('dragend', handleDragEnd);
                    sidebarContainer.appendChild(sidebarCard);
                });

            } catch (error) {
                console.error('Kartlar yüklenirken hata:', error);
                showErrorMessage(error);
            }
        }

        function displayCards(cards, teamName) {
            const sidebarContainer = document.getElementById('cardsContainer');
            const fieldContainer = document.getElementById('cardContainer');
            sidebarContainer.innerHTML = '';
            fieldContainer.innerHTML = '';

            // Teknik direktör kartlarını filtrele
            const playerCards = Array.from(cards).filter(card => {
                const positionBadge = card.querySelector('.position-badge');
                return !positionBadge || !positionBadge.textContent.includes('TEKNİK DİREKTÖR');
            });

            if (playerCards.length === 0) {
                showNoCardsMessage(teamName);
                return;
            }

            playerCards.forEach(card => {
                const sidebarCard = card.cloneNode(true);
                // Takım sınıfını ekle (eğer yoksa)
                if (!sidebarCard.classList.contains(teamName)) {
                    sidebarCard.classList.add(teamName);
                }
                sidebarCard.style.cursor = 'grab';
                sidebarCard.setAttribute('draggable', 'true');
                sidebarCard.addEventListener('dragstart', handleDragStart);
                sidebarCard.addEventListener('dragend', handleDragEnd);
                sidebarContainer.appendChild(sidebarCard);
            });

            console.log(`${playerCards.length} kart yüklendi - ${teamName}`);
        }

        function showNoCardsMessage(teamName) {
            const sidebarContainer = document.getElementById('cardsContainer');
            sidebarContainer.innerHTML = `
                <div class="no-cards-message">
                    ${teamName.charAt(0).toUpperCase() + teamName.slice(1)} için kartlar henüz hazır değil...
                </div>
            `;
        }

        function showErrorMessage(error) {
            const sidebarContainer = document.getElementById('cardsContainer');
            sidebarContainer.innerHTML = `
                <div class="no-cards-message">
                    Kartlar yüklenirken bir hata oluştu: ${error.message}<br>
                    Lütfen sayfayı yenileyin veya daha sonra tekrar deneyin.
                </div>
            `;
        }

        // Pozisyon kontrolü için yardımcı fonksiyon
        function isPositionAllowed(cardRole, allowedRoles) {
            // Kart rolünü kontrol et
            const cardType = cardRole.querySelector('.rating-type').textContent;
            return allowedRoles.includes(cardType);
        }
    </script>
</body>

</html> 